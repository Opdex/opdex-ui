<div id="pool" class="mt-5">
  <div class="container pt-3" *ngIf="pool">
    <div class="row">
      <div class="col">
        <opdex-card [warn]="true">
          <h4>Liquidity Pool Warning</h4>
          <p class="mb-0">Anybody can publicly create a liquidity pool between Cirrus token (CRS) and any SRC token. Validate the chosen liquidity pool and SRC token by the SRC token's address.</p>
        </opdex-card>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-xl-5">
        <opdex-card>
          <div class="d-flex align-items-center justify-content-between">
            <div>
              <h1 class="page-title mb-3">
                <a href="javascript:void(0)" routerLink="/tokens/{{pool.token.src.address}}">{{pool.token.src.symbol}}</a>-<a href="javascript:void(0)" routerLink="/tokens/CRS">CRS</a>
              </h1>
              <p class="mb-0">{{pool.token.src.name}} - Cirrus</p>
            </div>

            <div class="ml-4 d-flex flex-column h-100">
              <mat-chip-list aria-label="Amenities" class="float-right">
                <mat-chip color="primary" selected>0.3% Fee</mat-chip>
                <mat-chip color="primary" selected class="purple"><mat-icon class="mr-2">star</mat-icon> Nominated</mat-chip>
                <mat-chip selected class="red" *ngIf="pool.mining?.isActive"><mat-icon class="mr-2">whatshot</mat-icon> Mining</mat-chip>
              </mat-chip-list>

              <p class="mb-0 mt-3" style="text-align: right;">{{pool.address}}</p>
            </div>
          </div>
        </opdex-card>
      </div>

      <div class="col-12 col-xl">
        <opdex-card [fullHeight]="true">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="mb-0">
              {{pool.token.src.symbol}}
              <span class="ml-2 {{pool.token.src.summary.dailyPriceChange < 0 ? 'red' : 'green'}}">${{pool.token.src.summary.price.close | formatNumber: 2}}</span>
            </h4>
            <mat-icon>swap_horiz</mat-icon>
            <h4 class="mb-0">
              <span style="font-weight: 400;">{{pool.cost.crsPerSrc.close | formatNumber:8 }}</span>
              CRS
            </h4>
          </div>

          <div class="d-flex justify-content-between align-items-center">
            <h4 class="mb-0">CRS
              <span class="ml-2 {{pool.token.crs.summary.dailyPriceChange < 0 ? 'red' : 'green'}}">
                ${{pool.token.crs.summary.price.close | formatNumber: 2}}
              </span>
            </h4>
            <mat-icon>swap_horiz</mat-icon>
            <h4 class="mb-0">
              <span style="font-weight: 400;">{{pool.cost.srcPerCrs.close | formatNumber:pool.token.src.decimals > 8 ? 8 : pool.token.src.decimals}}</span>
              {{pool.token.src.symbol}}
            </h4>
          </div>
        </opdex-card>
      </div>

      <div class="col-12 col-xl">
        <opdex-card [fullHeight]="true">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="mb-0 align-items-center d-flex">
              <mat-icon class="mr-3">lock</mat-icon>
              {{pool.token.src.symbol}}</h4>
            <h4 class="mb-0" style="font-weight: 400;">{{pool.reserves.src | formatNumber:pool.token.src.decimals > 8 ? 8 : pool.token.src.decimals}}</h4>
          </div>
          <div class="d-flex justify-content-between align-items-center">
            <h4 class="mb-0 align-items-center d-flex">
              <mat-icon class="mr-3">lock</mat-icon>
              CRS
            </h4>
            <h4 class="mb-0" style="font-weight: 400;">{{pool.reserves.crs | formatNumber:8}}</h4>
          </div>
        </opdex-card>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-6 col-xl-3">
        <opdex-stat-card title="Liquidity" value="${{pool.reserves.usd | formatNumber}}" [change]="pool.reserves.usdDailyChange"></opdex-stat-card>
      </div>

      <div class="col-12 col-md-6 col-xl-3">
        <opdex-stat-card title="Staking Weight" value="${{pool.staking?.weight | formatNumber:0 }} {{pool.token.staking?.symbol}}" [change]="pool.staking?.weightDailyChange || 0"></opdex-stat-card>
      </div>

      <div class="col-12 col-md-6 col-xl-3">
        <opdex-stat-card title="Volume" [daily]="true" value="${{pool.volume.usd | formatNumber}}"></opdex-stat-card>
      </div>

      <div class="col-12 col-md-6 col-xl-3">
        <opdex-stat-card title="Rewards" [daily]="true" value="${{pool.rewards.totalUsd | formatNumber}}"></opdex-stat-card>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-xl-6">
        <opdex-card>
          <opdex-line-chart [chartData]="liquidityHistory" title="{{pool.token.src.symbol}}-CRS Liquidity" *ngIf="liquidityHistory"></opdex-line-chart>
        </opdex-card>
      </div>

      <div class="col-12 col-xl-6">
        <opdex-card>
          <opdex-volume-chart [chartData]="volumeHistory" *ngIf="volumeHistory"></opdex-volume-chart>
        </opdex-card>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-6 col-xl-3">
        <opdex-card class="mining-pool">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="d-inline mb-0">Balances</h3>
            <div>
              <button mat-icon-button class="swap small" (click)="openTransactionSidebar(1)"><mat-icon>swap_horiz</mat-icon></button>
            </div>
          </div>

          <div class="details">
            <div class="mining">
              <p class="sub-heading">CRS</p>
              <p class="value">{{walletBalance?.crsBalance}}</p>
            </div>

            <div class="remaining">
              <p class="sub-heading">{{pool.token.src.symbol}}</p>
              <p class="value">{{walletBalance?.srcBalance | formatNumber: 8}}</p>
            </div>
          </div>
        </opdex-card>
      </div>

      <div class="col-12 col-md-6 col-xl-3">
        <opdex-card class="mining-pool">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="d-inline mb-0">Providing</h3>
            <div>
              <button mat-icon-button class="remove small mr-2" (click)="openTransactionSidebar(2, 'remove')"><mat-icon>remove</mat-icon></button>
              <button mat-icon-button class="add small" (click)="openTransactionSidebar(2, 'add')"><mat-icon>add</mat-icon></button>
            </div>
          </div>

          <div class="details">
            <div class="mining">
              <p class="sub-heading">Position</p>
              <p class="value">{{walletBalance?.providing | formatNumber: 8}} LPT</p>
            </div>

            <!-- <div class="remaining">
              <p class="sub-heading">Rewards</p>
              <p class="value">1234 CRS/234 ODX</p>
            </div> -->
          </div>
        </opdex-card>
      </div>

      <div class="col-12 col-md-6 col-xl-3" *ngIf="pool.staking?.isActive">
        <opdex-card class="mining-pool">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="d-inline mb-0">Staking</h3>
            <div>
              <button mat-icon-button class="remove small mr-2" (click)="openTransactionSidebar(3, 'stop')"><mat-icon>remove</mat-icon></button>
              <button mat-icon-button class="add small" (click)="openTransactionSidebar(3, 'start')"><mat-icon>add</mat-icon></button>
            </div>
          </div>

          <div class="details">
            <div class="mining">
              <p class="sub-heading">Position</p>
              <p class="value">{{walletBalance?.staking | formatNumber: 8}} ODX</p>
            </div>

            <!-- <div class="remaining">
              <p class="sub-heading">Rewards</p>
              <p class="value">1234 LPT</p>
            </div> -->
          </div>
        </opdex-card>
      </div>

      <div class="col-12 col-md-6 col-xl-3">
        <opdex-card class="mining-pool" *ngIf="pool.mining">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="d-inline mb-0">Mining</h3>
            <div>
              <button mat-icon-button class="remove small mr-2" (click)="openTransactionSidebar(4, 'stop')"><mat-icon>remove</mat-icon></button>
              <button mat-icon-button class="add small" (click)="openTransactionSidebar(4, 'start')"><mat-icon>add</mat-icon></button>
            </div>
          </div>

          <div class="details">
            <div class="mining">
              <p class="sub-heading">Position</p>
              <p class="value">{{walletBalance?.mining | formatNumber: 8}} LPT</p>
            </div>

            <!-- <div class="remaining">
              <p class="sub-heading">Rewards</p>
              <p class="value">1234 ODX</p>
            </div> -->
          </div>
        </opdex-card>
      </div>
    </div>

    <div class="row mb-5">
      <div class="col-12">
        <opdex-card>
          <h2>Recent Transactions</h2>
          <opdex-transactions-table></opdex-transactions-table>
        </opdex-card>
      </div>
    </div>
  </div>
</div>
