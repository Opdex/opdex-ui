<div id="overview" class="mt-5">
  <div class="container" *ngIf="market">
    <div class="row">
      <div class="col">
        <opdex-card [warn]="true">
          <h4>Market Data and Opdex Analytics</h4>
          <p class="mb-0">All data represented is based on Opdex's best effort to ingest dynamic blockchain transactions and output analytical data. This data may have inaccuracies and is not to be taken as financial advice.</p>
        </opdex-card>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <h1 class="page-title">Market Overview</h1>

        <div class="stats">
          <div class="row">
            <div class="col-12 col-md-6 col-xl">
              <opdex-card>
                <h4 class="stat-header">
                  Cirrus (CRS)
                  <button mat-icon-button color="primary" class="tiny ml-1"><mat-icon>help</mat-icon></button>
                </h4>

                <div class="stat">
                  <p class="stat-value">
                    ${{market.crsToken.summary.price.close | formatNumber:2}}
                  </p>

                  <opdex-change-indicator [value]="market.crsToken.summary.dailyPriceChange"></opdex-change-indicator>
                </div>
              </opdex-card>
            </div>

            <div class="col-12 col-md-6 col-xl">
              <opdex-card>
                <h4 class="stat-header">
                  Liquidity
                  <button mat-icon-button color="primary" class="tiny ml-1"><mat-icon>help</mat-icon></button>
                </h4>

                <div class="stat">
                  <p class="stat-value">
                    ${{market.summary.liquidity | formatNumber:2}}
                  </p>

                  <opdex-change-indicator [value]="market.summary.liquidityDailyChange"></opdex-change-indicator>
                </div>
              </opdex-card>
            </div>

            <div class="col-12 col-md-6 col-xl">
              <opdex-card>
                <h4 class="stat-header">
                  Staking Weight
                  <button mat-icon-button color="primary" class="tiny ml-1"><mat-icon>help</mat-icon></button>
                </h4>

                <div class="stat">
                  <p class="stat-value">
                    {{market.summary.staking.weight | formatNumber:0}} <small>ODX</small>
                  </p>

                  <opdex-change-indicator [value]="market.summary.staking.weightDailyChange"></opdex-change-indicator>
                </div>
              </opdex-card>
            </div>

            <div class="col-12 col-md-6 col-xl">
              <opdex-card>
                <h4 class="stat-header">
                  Volume (24hr)
                  <button mat-icon-button color="primary" class="tiny ml-1"><mat-icon>help</mat-icon></button>
                </h4>

                <div class="stat">
                  <p class="stat-value">
                    ${{market.summary.volume | formatNumber:2}}
                  </p>
                </div>
              </opdex-card>
            </div>

            <div class="col-12 col-md-6 col-xl">
              <opdex-card>
                <h4 class="stat-header">
                  Rewards (24hr)
                  <button mat-icon-button color="primary" class="tiny ml-1"><mat-icon>help</mat-icon></button>
                </h4>

                <div class="stat">
                  <p class="stat-value">
                    ${{market.summary.rewards.totalUsd | formatNumber}}
                  </p>
                </div>
              </opdex-card>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-xl-6">
        <opdex-card class="p-0">
          <opdex-line-chart [chartData]="liquidityHistory" title="Market Liquidity" *ngIf="liquidityHistory"></opdex-line-chart>
        </opdex-card>
      </div>

      <div class="col-12 col-xl-6">
        <opdex-card>
          <opdex-volume-chart [chartData]="volumeHistory" title="Market Volume" *ngIf="volumeHistory"></opdex-volume-chart>
        </opdex-card>
      </div>
    </div>

    <ng-container *ngIf="miningPools$ | async as miningPools">
      <div class="row" *ngIf="miningPools.length">
        <div class="col-12">
          <h2 class="mb-3 text-shadow">Liquidity Mining</h2>

          <div class="row">
            <ng-container *ngFor="let pool of miningPools">
              <div class="col-12 col-xl-3">
                <opdex-mining-card [pool]="pool"></opdex-mining-card>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>

    <div class="row">
      <div class="col-12">
        <opdex-card>
          <h2>Top Pools</h2>
          <opdex-pools-table [pools]="pools"></opdex-pools-table>
        </opdex-card>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <opdex-card>
          <h2>Top Tokens</h2>
          <opdex-tokens-table [tokens]="tokens" [smallPageSize]="true"></opdex-tokens-table>
        </opdex-card>
      </div>
    </div>
  </div>
</div>


