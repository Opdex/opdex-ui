<div id="overview" class="page-container">
  <div class="container" *ngIf="market">
    <div class="row">
      <div class="col">
        <!-- <opdex-card [warn]="true" [closable]="true">
          <h4>Market Data and Opdex Analytics</h4>
          <p class="mb-0">All data represented is based on Opdex's best effort to ingest dynamic blockchain transactions and output analytical data. This data may have inaccuracies and is not to be taken as financial advice.</p>
        </opdex-card> -->
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <h1 class="text-shadow mb-3">
          <opdex-copy-button [tooltip]="market?.address" [value]="market?.address" icon="link"></opdex-copy-button>
          <span>Market Overview</span>
        </h1>

        <div class="stats">
          <div class="scrollable-row">
            <ng-container *ngFor="let statCard of statCards">
              <div *ngIf="statCard.show" class="scrollable-card">
                <opdex-stat-card [statInfo]="statCard"></opdex-stat-card>
              </div>
          </ng-container>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-lg-8">
        <opdex-card [noPadding]="true">
          <opdex-line-chart
            [chartData]="chartData"
            [chartOptions]="chartOptions"
            [selectedChart]="selectedChart"
            title="{{selectedChart.category}}"
            *ngIf="chartData"
            [showTimeSpans]="false"
            (onTypeChange)="handleChartTypeChange($event)"
            (onTimeChange)="handleChartTimeChange($event)"></opdex-line-chart>
        </opdex-card>
      </div>

      <!-- Todo: Do this with angular and *ngIf so we aren't rendering it in 2 places-->
      <div class="d-none d-lg-block col-lg-4">
        <opdex-tx-feed [transactionRequest]="transactionRequest" size="s"></opdex-tx-feed>
      </div>
    </div>

    <ng-container *ngIf="miningPools$ | async as miningPools">
      <div class="row" *ngIf="miningPools.length">
        <div class="col-12">
          <h2 class="mb-3 text-shadow d-flex align-items-center">
            <mat-icon class="mr-2 mine">whatshot</mat-icon>
            Liquidity Mining
          </h2>

          <div class="scrollable-row">
            <ng-container *ngFor="let pool of miningPools">
              <div class="scrollable-card">
                <opdex-mining-card [pool]="pool"></opdex-mining-card>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>

    <div class="row">
      <div class="col-12 col-lg-6">
        <opdex-card [hasToolbar]="true" [thin]="true">
          <ng-container toolbar>
            <div class="details">
              <h4 class="title d-inline">Top Liquidity Pools</h4>
            </div>

            <div class="button-group">
              <button mat-icon-button color="primary" (click)="createPool()"><mat-icon>add</mat-icon></button>
            </div>
          </ng-container>

          <opdex-pools-table [pools]="pools" [smallPageSize]="true"></opdex-pools-table>
        </opdex-card>
      </div>

      <div class="col-12 col-lg-6">
        <opdex-card [hasToolbar]="true" [thin]="true">
          <ng-container toolbar>
            <div class="details">
              <h4 class="title d-inline">Top Tokens</h4>
            </div>
          </ng-container>

          <opdex-tokens-table [tokens]="tokens" [smallPageSize]="true"></opdex-tokens-table>
        </opdex-card>
      </div>
    </div>

    <div class="row">
      <div class="col-12 d-lg-none d-xl-none">
        <opdex-tx-feed [transactionRequest]="transactionRequest"></opdex-tx-feed>
      </div>
    </div>
  </div>
</div>


