<section id="auth" class="header-section tx-bg">
  <div class="container">
    <opdex-card>
      <img src="/assets/logo-light-blue.png" alt="Opdex Logo" class="logo">

      <h2>Connect</h2>

      <form [formGroup]="form" name="auth-form" id="auth-form" (submit)="submit()">
        <mat-form-field floatLabel="always">
          <mat-label>Public Key</mat-label>

          <button mat-icon-button matPrefix type="button" disabled><mat-icon>{{icons.link}}</mat-icon></button>

          <input matInput aria-label="Public Key" [matAutocomplete]="auto" [formControl]="publicKey" type="text">

          <mat-hint>Enter your public wallet address to continue</mat-hint>

          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let key of publicKeys$ | async" [value]="key">
              <div class="d-flex justify-content-between align-items-center">
                <small style="font-size: 15px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{key}}</small>
                <button mat-icon-button class="mine tiny" (click)="deletePublicKey(key)"><mat-icon>{{icons.delete}}</mat-icon></button>
              </div>
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <mat-checkbox
          class="mt-3"
          formControlName="rememberMe"
          color="primary"
          name="rememberMe"
          value="false"
          aria-label="Remember Me">
          Remember Me
        </mat-checkbox>

        <div class="authenticate" *ngIf="publicKey.value">
          <opdex-qr-code [data]="publicKey.value"></opdex-qr-code>

          <button mat-button color="primary" class="w-100" [disabled]="!form.valid || submitting">Continue</button>

          <mat-progress-bar mode="indeterminate" *ngIf="submitting" class="mt-3"></mat-progress-bar>

          <p class="error mt-3 bold mb-0" *ngIf="error">Invalid public key</p>
        </div>
      </form>
    </opdex-card>
  </div>
</section>
