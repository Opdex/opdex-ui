<section id="auth" class="header-section tx-bg flex-row-center-center">
  <div class="container">
    <opdex-card>
      <div class="flex-row-center-center mb-3 mt-2">
        <img src="/assets/logo-light-blue.png" alt="Opdex Logo" class="logo mr-1">
        <h1 class="mb-0">Login</h1>
      </div>

      <p class="text-center">Scan or copy the QR code using a compatible Stratis wallet to login.</p>

      <opdex-qr-code [data]="stratisId"></opdex-qr-code>

      <div class="mt-3" *ngIf="percentageTimeRemaining">
        <small>Code Reset</small>
        <mat-progress-bar [color]="percentageTimeRemaining < 10 ? 'warn' : 'primary'" [value]="percentageTimeRemaining"></mat-progress-bar>
        <small class="mt-2 light">{{timeRemaining}} Remaining</small>
      </div>

      <form [formGroup]="form" name="auth-form" id="auth-form" (submit)="submitDevnetAuth()" *ngIf="isDevnet">
        <mat-divider class="mt-3 mb-3" style="position: relative"></mat-divider>
        <h4 class="mb-3">Devnet Login</h4>

        <mat-form-field floatLabel="always">
          <mat-label>Public Key</mat-label>

          <button mat-icon-button matPrefix type="button" disabled><mat-icon>{{icons.link}}</mat-icon></button>

          <input matInput aria-label="Public Key" [matAutocomplete]="auto" [formControl]="publicKey" type="text">

          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let key of devnetPublicKeys$ | async" [value]="key">
              <div class="flex-row-center-between">
                <small class="overflow-ellipsis" style="font-size: 15px;">{{key}}</small>
                <button mat-icon-button class="tiny" (click)="deleteDevnetPublicKey(key)"><mat-icon class="mine">{{icons.delete}}</mat-icon></button>
              </div>
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <mat-checkbox
          class="mt-3"
          formControlName="rememberMe"
          color="primary"
          name="rememberMe"
          value="false"
          aria-label="Remember Me">
          Remember Me
        </mat-checkbox>

        <button mat-flat-button color="primary" class="w-100 mt-3" [disabled]="!form.valid || submitting">Sign and Continue</button>

        <mat-progress-bar mode="indeterminate" *ngIf="submitting" class="mt-3"></mat-progress-bar>

        <p class="error mt-3 bold mb-0" *ngIf="error">Invalid public key</p>
      </form>
    </opdex-card>
  </div>
</section>
